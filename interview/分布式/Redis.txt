缓存一致性的问题：
问题一：
    假如我们对写操作，是先更新数据库，在删除缓存。 会存在，更新数据库成功，删除缓存失败，导致数据不一致的问题。
    解决办法：所以需要优先删除缓存，然后再更新数据库。

问题二：
    当存在并发较大的情况下，先出现了写请求，这时删除了缓存数据，然后再去更新数据库。假如更新数据库还没完成时，读请求过来了。
    读请求从缓存中获得数据，发现没有命中，则从数据库中去读取数据到缓存。然后写操作的更新数据库完成了。
    这样就造成了缓存是旧数据，而数据库中是新数据的问题。
    解决办法：再有写入的请求下，把并发操作，变成串行操作。通过一个队列来实现。比如把商品的ID哈希取模后，更新请求放入到队列中。然后更新完成后，从队列中移除。
                     再没有更新成功时，如果有读请求，那会先判断缓存，缓存如果没有的话，则判断对列中是否有该值。如果有，则把get请求放入到队列中，等更新完成后，再处理读请求。优化的话，可以自旋去缓存中取，如果200ms没有成功的话，直接去数据库中取值。
